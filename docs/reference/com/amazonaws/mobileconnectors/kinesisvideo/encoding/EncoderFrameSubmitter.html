<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_181) on Sat Mar 23 00:15:08 UTC 2019 -->
<title>EncoderFrameSubmitter (AWS SDK for Android - 2.12.6)</title>
<meta name="date" content="2019-03-23">
<link rel="stylesheet" type="text/css" href="../../../../../JavaDoc.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="EncoderFrameSubmitter (AWS SDK for Android - 2.12.6)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFactory.html" title="class in com.amazonaws.mobileconnectors.kinesisvideo.encoding"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderWrapper.html" title="class in com.amazonaws.mobileconnectors.kinesisvideo.encoding"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFrameSubmitter.html" target="_top">Frames</a></li>
<li><a href="EncoderFrameSubmitter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.amazonaws.mobileconnectors.kinesisvideo.encoding</div>
<h2 title="Class EncoderFrameSubmitter" class="title">Class EncoderFrameSubmitter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.amazonaws.mobileconnectors.kinesisvideo.encoding.EncoderFrameSubmitter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">EncoderFrameSubmitter</span>
extends java.lang.Object</pre>
<div class="block">Utility class to submit frames to the encoder.

 Submits the camera image image into the encoder plane-by-plane.

 It's up to you to make sure the camera image has the same color format as the encoder input
 image. It works on multiple devices when camera image is in ImageFormat.YUV_420_888 and
 encoder is MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Flexible. 'Flexible' here means
 that encoder can choose it's own way of packaging the YUV420 frame, so it might not work on
 some devices. Probably there needs to be more complex logic to mediate/convert between these.

 Danger. Serious magic happens here, there's zero documentation for this in sdk or interwebs.
 Modify at your own risk.

 Currently works like this:

   - first, get the temporary input buffer from the encoder:
        - encoders expect frame data to be aligned correctly, and they have a lot of
          assumptions about it, so it's hard to figure out the way to correctly put data
          into it.

          So we're not going to use this buffer directly to put the frame data into. We need
          it just to know its index and calculate its size.

          We still need buffer index and buffer size to do anything with the encoder,
          so there's no way to get rid of this step;

   - get the input image from the encoder using the buffer index we got in the previous
     step:
        - encoder gives us writable image in correct format. This way we don't need to worry
          about alignments or anything, we just need to populate buffers for each of the image's
          plane.

          When we get the image, the original buffer from the previous step becomes unusable;

   - copy the camera image into the encoder input image plane-by-plane:
        - this assumes they're in the same format. Which may not be the case. There should be
          more complicated logic to support this;

   - submit the image into the encoder:
        - we need to use the input buffer index and also provide the size of
          the data we're submitting.

          Because we used the same input buffer index for the first two steps, we can use the same
          index for submitting the buffer into the encoder.

          Problem now is that we also need to know the input data size when we're submitting it.
          But we used the input image, we did not put data into input buffer directly.
          So we don't know its size. That's because when we got the input image from the encoder,
          it managed the buffer allocation and alignment and all other magic internally
          behind the scenes, so we cannot just add up all image planes sizes
          to figure out the buffer size.

          So the best guess now is to use the original temporary input buffer size we got from
          first step. Some internal alien magic happens here either. Actual image size is larger
          than the buffer size from the first step, so encoder seems to use something else
          in addition to this information. But if you submit incorrect buffer size it'll crash.

    - mic drop</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFrameSubmitter.html#EncoderFrameSubmitter-android.media.MediaCodec-">EncoderFrameSubmitter</a></span>(android.media.MediaCodec&nbsp;encoder)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFrameSubmitter.html#submitFrameToEncoder-android.media.Image-boolean-">submitFrameToEncoder</a></span>(android.media.Image&nbsp;frameImageYUV420,
                    boolean&nbsp;endOfStream)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="EncoderFrameSubmitter-android.media.MediaCodec-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>EncoderFrameSubmitter</h4>
<pre>public&nbsp;EncoderFrameSubmitter(android.media.MediaCodec&nbsp;encoder)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="submitFrameToEncoder-android.media.Image-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>submitFrameToEncoder</h4>
<pre>public&nbsp;void&nbsp;submitFrameToEncoder(android.media.Image&nbsp;frameImageYUV420,
                                 boolean&nbsp;endOfStream)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFactory.html" title="class in com.amazonaws.mobileconnectors.kinesisvideo.encoding"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderWrapper.html" title="class in com.amazonaws.mobileconnectors.kinesisvideo.encoding"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/amazonaws/mobileconnectors/kinesisvideo/encoding/EncoderFrameSubmitter.html" target="_top">Frames</a></li>
<li><a href="EncoderFrameSubmitter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2018 Amazon Web Services, Inc. All Rights Reserved.</small></p>
</body>
</html>
